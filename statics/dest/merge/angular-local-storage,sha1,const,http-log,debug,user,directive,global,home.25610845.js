/*/component/angular-local-storage.js*/
(function(){"use strict";var e=angular.module("LocalStorageModule",[]);e.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){this.prefix=e},this.setStorageType=function(e){this.storageType=e},this.setStorageCookie=function(e,t){this.cookie={expiry:e,path:t}},this.setStorageCookieDomain=function(e){this.cookie.domain=e},this.setNotify=function(e,t){this.notify={setItem:e,removeItem:t}},this.$get=["$rootScope","$window","$document",function(e,t,o){var r,n=this,a=n.prefix,i=n.cookie,c=n.notify,s=n.storageType;o?o[0]&&(o=o[0]):o=document,"."!==a.substr(-1)&&(a=a?a+".":"");var u=function(e){return a+e},l=function(){try{var o=s in t&&null!==t[s],n=u("__"+Math.round(1e7*Math.random()));return o&&(r=t[s],r.setItem(n,""),r.removeItem(n)),o}catch(a){return s="cookie",e.$broadcast("LocalStorageModule.notification.error",a.message),!1}}(),g=function(t,o){if(!l||"cookie"===n.storageType)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),c.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:"cookie"}),p(t,o);"undefined"==typeof o&&(o=null);try{(angular.isObject(o)||angular.isArray(o))&&(o=angular.toJson(o)),r&&r.setItem(u(t),o),c.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:n.storageType})}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.message),p(t,o)}return!0},f=function(t){if(!l||"cookie"===n.storageType)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T(t);var o=r?r.getItem(u(t)):null;return o&&"null"!==o?"{"===o.charAt(0)||"["===o.charAt(0)?angular.fromJson(o):o:null},d=function(t){if(!l)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),c.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:"cookie"}),y(t);try{r.removeItem(u(t)),c.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:t,storageType:n.storageType})}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),y(t)}return!0},m=function(){if(!l)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=a.length,o=[];for(var n in r)if(n.substr(0,t)===a)try{o.push(n.substr(t))}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return o},h=function(t){t=t||"";var o=a.slice(0,-1),n=new RegExp(o+"."+t);if(!l)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),O();var i=a.length;for(var c in r)if(n.test(c))try{d(c.substr(i))}catch(s){return e.$broadcast("LocalStorageModule.notification.error",s.message),O()}return!0},S=function(){try{return navigator.cookieEnabled||"cookie"in o&&(o.cookie.length>0||(o.cookie="test").indexOf.call(o.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}},p=function(t,r){if("undefined"==typeof r)return!1;if(!S())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var n="",a=new Date,c="";if(null===r?(a.setTime(a.getTime()+-864e5),n="; expires="+a.toGMTString(),r=""):0!==i.expiry&&(a.setTime(a.getTime()+24*i.expiry*60*60*1e3),n="; expires="+a.toGMTString()),t){var s="; path="+i.path;i.domain&&(c="; domain="+i.domain),o.cookie=u(t)+"="+encodeURIComponent(r)+n+s+c}}catch(l){return e.$broadcast("LocalStorageModule.notification.error",l.message),!1}return!0},T=function(t){if(!S())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=o.cookie&&o.cookie.split(";")||[],n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(u(t)+"="))return decodeURIComponent(i.substring(a.length+t.length+1,i.length))}return null},y=function(e){p(e,null)},O=function(){for(var e=null,t=a.length,r=o.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));y(i)}},v=function(){return s},b=function(e,t,o){var r=f(t);null===r&&angular.isDefined(o)?r=o:angular.isObject(r)&&angular.isObject(o)&&(r=angular.extend(o,r)),e[t]=r,e.$watchCollection(t,function(e){g(t,e)})};return{isSupported:l,getStorageType:v,set:g,add:g,get:f,keys:m,remove:d,clearAll:h,bind:b,deriveKey:u,cookie:{set:p,add:p,get:T,remove:y,clearAll:O}}}]})}).call(this);
/*/component/sha1.js*/
var CryptoJS=CryptoJS||function(t,n){var i={},e=i.lib={},r=function(){},s=e.Base={extend:function(t){r.prototype=this;var n=new r;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=e.WordArray=s.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=n?i:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var n=this.words,i=t.words,e=this.sigBytes;if(t=t.sigBytes,this.clamp(),e%4)for(var r=0;t>r;r++)n[e+r>>>2]|=(i[r>>>2]>>>24-8*(r%4)&255)<<24-8*((e+r)%4);else if(65535<i.length)for(r=0;t>r;r+=4)n[e+r>>>2]=i[r>>>2];else n.push.apply(n,i);return this.sigBytes+=t,this},clamp:function(){var n=this.words,i=this.sigBytes;n[i>>>2]&=4294967295<<32-8*(i%4),n.length=t.ceil(i/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(n){for(var i=[],e=0;n>e;e+=4)i.push(4294967296*t.random()|0);return new o.init(i,n)}}),a=i.enc={},c=a.Hex={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],e=0;t>e;e++){var r=n[e>>>2]>>>24-8*(e%4)&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var n=t.length,i=[],e=0;n>e;e+=2)i[e>>>3]|=parseInt(t.substr(e,2),16)<<24-4*(e%8);return new o.init(i,n/2)}},h=a.Latin1={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],e=0;t>e;e++)i.push(String.fromCharCode(n[e>>>2]>>>24-8*(e%4)&255));return i.join("")},parse:function(t){for(var n=t.length,i=[],e=0;n>e;e++)i[e>>>2]|=(255&t.charCodeAt(e))<<24-8*(e%4);return new o.init(i,n)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(n){throw Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},f=e.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var i=this._data,e=i.words,r=i.sigBytes,s=this.blockSize,a=r/(4*s),a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(n=a*s,r=t.min(4*n,r),n){for(var c=0;n>c;c+=s)this._doProcessBlock(e,c);c=e.splice(0,n),i.sigBytes-=r}return new o.init(c,r)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});e.Hasher=f.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,i){return new t.init(i).finalize(n)}},_createHmacHelper:function(t){return function(n,i){return new l.HMAC.init(t,i).finalize(n)}}});var l=i.algo={};return i}(Math);!function(){var t=CryptoJS,n=t.lib,i=n.WordArray,e=n.Hasher,r=[],n=t.algo.SHA1=e.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,n){for(var i=this._hash.words,e=i[0],s=i[1],o=i[2],a=i[3],c=i[4],h=0;80>h;h++){if(16>h)r[h]=0|t[n+h];else{var u=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=u<<1|u>>>31}u=(e<<5|e>>>27)+c+r[h],u=20>h?u+((s&o|~s&a)+1518500249):40>h?u+((s^o^a)+1859775393):60>h?u+((s&o|s&a|o&a)-1894007588):u+((s^o^a)-899497514),c=a,a=o,o=s<<30|s>>>2,s=e,e=u}i[0]=i[0]+e|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+c|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,e=8*t.sigBytes;return n[e>>>5]|=128<<24-e%32,n[(e+64>>>9<<4)+14]=Math.floor(i/4294967296),n[(e+64>>>9<<4)+15]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=e._createHelper(n),t.HmacSHA1=e._createHmacHelper(n)}();
/*/service/const.js*/
!function(t){"use strict";var a=angular.module("jt.service.const",[]),n=angular.extend({app:"timtam"},CONFIG);a.constant("CONST",n)}(this);
/*/service/http-log.js*/
!function(){"use strict";var e=angular.module("jt.service.httpLog",["LocalStorageModule"]),t=Date.now||function(){return(new Date).getTime()};e.factory("httpLog",["$q","$injector","CONST","localStorageService",function(e,r,n,o){function u(e){return e===f||-1!=e.indexOf("httplog=false")?!0:!1}function s(e,t){var r=e("JT-Deprecate");r&&"development"===n.env&&alert("url:"+t+"is deprecate, "+r)}function c(){o.set("httpLog",i)}function a(){var e=r.get("$http");(h.length||l.length)&&e.post(f,i).success(function(e){h.length=0,l.length=0,c(),setTimeout(a,g)}).error(function(e){setTimeout(a,g)})}var i=o.get("httpLog")||{success:[],error:[]},h=i.success,l=i.error,g=12e4,f="/sys/http-log";h.length+l.length>10?setTimeout(a,1):setTimeout(a,g);var p={request:function(e){return e._createdAt=t(),e},response:function(e){var r=e.config,n=r.url;if(s(e.headers,n),u(n))return e;var o=t()-r._createdAt;return h.push({url:n,method:r.method,use:o}),c(),e},requestError:function(t){return e.reject(t)},responseError:function(r){var n=r.config,o=n.url;return s(r.headers,o),u(o)?e.reject(r):(l.push({url:o,method:n.method,status:r.status,use:t()-n._createdAt}),c(),e.reject(r))}};return p}])}(this);
/*/service/debug.js*/
!function(n){"use strict";function e(){}function t(n){var t=window.debug;if(t){var r=n.pattern;return r?t.enable(r):t.disable(),t}return function(){return e}}var r=angular.module("jt.service.debug",[]);t.$inject=["CONST"],r.factory("debug",t)}(this);
/*/service/user.js*/
!function(t){"use strict";var n=angular.module("jt.service.user",[]);n.factory("user",["$rootScope","$http","$q","debug",function(t,n,r,e){function o(t){var r=n.post(a.url,t);return r.then(function(n){i=null,u(n,t.type)}),r}function u(n,r){s=n.data,s.deviation=_.now()-s.now,e("user:%j",s),angular.forEach(c,function(t){t.resolve(angular.copy(s))}),c.length=0,r&&t.$broadcast("user",r)}e=e("user");var i,s,c=[],a={url:"/user?cache=false",session:function(){var t=r.defer();return s?t.resolve(s):i?c.push(t):(this._getSession(),c.push(t)),t.promise},_getSession:function(){i=n.get(a.url),i.then(function(t){u(t)},function(t){angular.forEach(c,function(n){n.reject(t)}),c.length=0})},register:function(t,n){var r={type:"register",account:t,password:CryptoJS.SHA1(n).toString()};return o(r)},login:function(t,n){var r=CryptoJS.SHA1(n).toString();n=CryptoJS.SHA1(r+s.code).toString();var e={type:"login",account:t,password:n};return o(e)},logout:function(){var t=n["delete"](a.url);return t.then(function(t){i=null,u(t,"logout")}),t}};return a}])}(this);
/*/js/directive.js*/
!function(t){"use strict";function e(t){function e(t,e,i){function n(){e.removeClass("hidden");var i=e.outerWidth(),n=e.outerHeight();e.css({"margin-left":-i/2,"margin-top":-n/2}),t.modal&&(o=angular.element('<div class="mask"></div>'),e.after(o)),e.find("input:first").focus()}var o;t.$watch("status",function(t){"hidden"===t?e.addClass("hidden"):n()}),t.destroy=function(){e.remove(),o&&o.remove(),t.$destroy()},e.on("click",".destroy",function(){t.destroy()}),e.on("keyup",function(e){13===e.keyCode&&t.submit&&t.submit()})}return{restrict:"E",link:e}}var i=angular.module("jt.directive.widget",[]);i.directive("jtDialog",e),e.$inject=["$compile"]}(this);
/*/js/global.js*/
!function(e){"use strict";function n(e){return function(){return{request:function(n){return n.url=e+n.url,n}}}}function t(e,n,t){return function(r,o){if("development"===t.env)alert(r.message),e.error.apply(e,arguments);else{var i=n.get("$http");i.post("/exception?httplog=false",{message:r.message,stack:r.stack,cause:o})}}}function r(e,n,t,r,o){TIMING.end("js"),o=o("app.run");var i=function(){var n=angular.extend({timeline:TIMING.getLogs(),screen:{width:t.screen.width,height:t.screen.height,innerHeight:t.innerHeight,innerWidth:t.innerWidth}},t.performance);e.post("/sys/statistics",n)};if(t.onload=function(){i()},"development"===r.env){var s=1e4,u=function(){var e=0,t=function(n){if(n.data().hasOwnProperty("$scope")){var r=n.data().$scope.$$watchers;r&&(e+=r.length)}angular.forEach(n.children(),function(e){t(angular.element(e))})};t(angular.element(document.body)),o("watcher total:"+e),n(function(){u()},s)};n(function(){u()},u)}}function o(e,n,t,r,o){function i(n){var o=angular.element(angular.element("#loginDialog").html()),i=e.$new(!0);angular.extend(i,{status:"show",type:n,modal:!0}),t(o)(i),r.append(o),i.submit=function(){c(i)},angular.forEach(["account","password"],function(e){i.$watch(e,function(){i.error=""})})}function s(){i("login")}function u(){i("register")}function a(){o.logout()}function c(e){if(!e.account||!e.password)return void(e.error="账号和密码均不能为空");e.submiting=!0,e.msg="正在提交，请稍候...";var n=o[e.type];n&&n(e.account,e.password).success(function(){e.destroy()}).error(function(n){e.error=n.msg||n.error||"未知异常",e.submiting=!1,e.msg=""})}function l(){f.session.status="loading",o.session().then(function(e){angular.extend(f.session,e),f.session.status="success"},function(e){f.session.error=e,f.session.status="fail"})}var f=this;f.login=s,f.logout=a,f.register=u,f.session={},e.$on("user",function(e,n){l()}),l()}var i=["LocalStorageModule","jt.service.const","jt.service.debug","jt.service.httpLog","jt.service.user","jt.directive.widget"],s=angular.module("jtApp",i);s.addRequires=function(e){angular.isArray(e)||(e=[e]);var n=s.requires;return angular.forEach(e,function(e){~n.indexOf(e)||n.push(e)}),this},s.config(["localStorageServiceProvider",function(e){e.prefix="jt"}]).config(["$httpProvider","CONST",function(e,t){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var r=t.appUrlPrefix;if(r){var o=n(r);e.interceptors.push(o)}e.interceptors.push("httpLog")}]).config(["$provide",function(e){var n=["$log","$injector","CONST",t];e.decorator("$exceptionHandler",n)}]),s.run(["$http","$timeout","$window","CONST","debug",r]),s.controller("AppController",o),o.$inject=["$scope","$http","$compile","$element","user"]}(this);
/*/js/home.js*/
!function(n){"use strict";var t=function(n,t,e,o){o.session().then(function(n){},function(n){})};t.$inject=["$scope","$http","debug","user"],angular.module("jtApp").controller("HomePageController",t)}(this);